#
# Example configuratio file for AustHex
# 24/03/2002, Simon Butcher <pickle@austnet.org>
# 
# As you can see, this is very 'C' styled, similar to many configuration
# files around these days (bind etc).
#
# Comments can be C style (/* comment */), C++ style (// comment) or
# UNIX style (# comment). If you need to write something which included
# something which may look like a comment such as a channel name, encase it
# within quotes (", ' or `), such as "#channel".
#
# Values will need to be enclosed within quotes if they include a space, else
# only the first word of a value may be used.
#
# Each class must be enclosed within a pair of parenthesis ('{' and '}').
# Definitions may be of the form "variable = value" or "variable value",
# whichever suits you at the time, or whichever looks neater. Each definition
# MUST be terminated by a semi-colon (';'), however this is optional for
# classes.
#
# This variety of styles is intentional to allow you to use various friendly
# configuration tools which have some (or all) of these capabilities.
#
# For more information, see the ircd.conf(5) man page, as the comments in this
# file often will not explain every detail as explicitly as the documentation
# will.
#
# This file uses a variety of comment, quote and definition styles on purpose
# to show how they can be used.
#
# You must edit this to suit your server!!!
#

options {
   // Location of the MOTD file
   motdfile = ircd.motd;
   
   // Location of the languages directory
   languagedir = langs;

   // This is the host name of your server
   serverName=austhex8.dev.austnet.org;
   
   // This description appears in /whois messages, server listings etc.
   description = "\037AustHex8\037 \002Development Server\002";
   
   // Setting this will hide your server from users
//   hidden;
   
   /* Our chroot (change-root) gaol location. WARNING!! Do not set this unless
    * you have read all the documentation (doc/Security) on how to do so. All 
    * file locations in this file WILL have to be refereced under this 
    * directory as if it were /. 
    */
//   chroot = /chroot/ircd;

   /* These variables (chuser and chgroup) define user/group (or uid/gid's) to
    * switch to after the configuraton has loaded. All files beyond this point
    * will need to be accessible with the server running under the given
    * user/group, or they will not be able to be loaded.
    */
//   chuser = nobody;
//   chgroup = nobody;

   /* Define limits on things. These should comply with network-wide settings.
    * The use of large numbers here may result in cropped fields in some 
    * protocols.
    */
   limits {
      // Limits for channels
      channels {
         // Maximum number of ban masks set at once per channel
         maxBans = 50;
      
         // Maximum number of ban exception masks set at once per channel
         maxBanExceptions = 50;
       
         // Maximum number of invite-only exception masks set at once per channel
         maxInviteExceptions = 50;
     
         // Maximum length of a channel name
         maxNameLength = 40;
       
         // Maximum length of a channel's topic
         maxTopicLength = 300;
      };

      // Limits for users
      users {
         // Maximum number of accepts per user
         maxAccepts = 100;
    
         /* Maximum number of channels a user can be in at once. This does not 
          * apply to authenticated operators
          */
         maxChannels = 10;
    
         // Maximum languages set at once per user
         maxLanguages = 6;
      
         // Maximum length of a nickname
         maxNickNameLength = 15;
    
         // Maximum length of the realname/GECOS field for users
         maxRealNameLength = 50;
    
         // Maximum number of silences per user
         maxSilences = 20;
      
         // Maximum number of nickname/channel/server watches per user
         maxWatches = 128;
      };

      // Maximum length of a KICK command's reason
      maxKickReasonLength = 300;

      /* Maximum number of targets possible to be specified for PRIVMSG,
       * NOTICE, CTCP/ME (in IRC-3) etc.
       */
      maxTargets = 4;

      /* Minimum length of a broadcasted message (WALLOPS, PRIVMSG broadcasts
       * etc). This is designed to avoid abuse, or accidental broadcasts of 
       * incomplete messages, as they are considered "expensive" bandwidth 
       * wise. Set to '0' to remove the limit.
       */
      minBroadcastLength = 20;
   };
};


/* Our logging class.
 * More on this later I think :)
 */
logging {
   
};


// Example of how to include a configuration file.
include "include.conf";


/* The Administrator section defines information about the person or
 * organisation that administrates this server. Everything here is required
 * except the admnistrator location.
 */
administrator {
   name = 
      "Simon Butcher";
   location = 
      "Server located in Melbourne, Australia";
   email = 
      "Email - pickle@austnet.org";
};


/* The SSL section specifically defines configuration data specific to 
 * 'IRCS' - that is IRC through a Secure Socket Layer. Connecting to the
 * secure ports are considerably slower than ordinary ports (checking keys
 * upon connection is the slow part of SSL), so it is recommended to keep
 * SSL for server links and operator links, but considering the limited
 * number of clients that support SSL (at the time of writing, it's BitchX
 * and that's it?) you could probably get away with it.
 *
 * This section is totally ignored if SSL support is not compiled in to your
 * server.
 */
ssl {
   /* This is the full path and filename of the certificate file that
    * identifies this server. This certificate must be generated off the
    * master certificate of the network if you want to connect to other
    * servers via SSL, and must be kept secure!
    *
    * For those technically interested, the type of the certificate should be
    * 'PEM' (Base64 Privacy Enhanced Mail encoded certificate) because it
    * seems to be the 'preferred' format, and is easier to transport.
    */
   certificate = "mothership.cert";
};


/* The operators class defines who you allow as operators on your server,
 * where they are allowed to connect and identify themselves from, their
 * passwords, and a name or description.
 *
 * Be aware that if the network you are connecting to employs a server doing
 * centralised operator management, these entries then may be disabled upon
 * linking the server to the network, depending on the validity of the entries.
 * This isn't a bad thing, as the disabled entries are always enabled if the
 * server is an island (that is totally delinked), which can allow for your own
 * entries which can control the server should something happen (such as
 * relinking it to the network), without them having to have direct access to
 * the network.
 * 
 * Also note that upon linking to the network the operator list may grow in
 * such a situation to include operators not mentioned here as the network-wide
 * operator list is proliferated over the network.
 *
 * Note that while only 'Global' operators are spread over the network, 'Local'
 * operators can still be disabled by any arbiter server.
 */
operators {
   pickle {
      Name = "Simon (\"pickle\") as a global";
      password = "0TqOz>1Es?NF0nh#*+0VeL]D00&U]r";
      type = global;
      
      hosts {
         172.16.2.0/24;
	 *.alien.intranet;
      };
   };
   
   [Pickle] {
      Name = "Simon, but local this time";
      password = "14p5N50Zf0i%1D-en-0E5FnB18Pg2j";
      type = local;
      
      hosts {
         172.16.0.0/12;
	 *.intranet;
      };
   };
   
   karl {
      name = Karl;
      type = global;
      
      password = "0I?+#x1JsEE209Zk[v16/d-r0dqaX9";
      
      hosts {
         *;
      };
   };
   
   sl7 {
      name = Steve;
      type = global;
      
      password = "16c~y50|<vD#1N7Udb0i~z~)0zq9hj";
      
      hosts {
         *;
      };
   };
};


/* Our main ports, ircu style (6665-6669). Those folk have a lot to answer for!
 * Note that this WILL bind to all of those ports in that range - handy for one
 * definition. Just in case we also accept server connections here.
 */
listen {
   port = ircu;
   secure = false;
   allowUsers = true;
   allowServices = true;
   allowServers = true;
};


/* The standard IRC port, however it requires root access as it is a port
 * within the well-known-services range (first 1024 ports)
 */
listen {
   port = irc;
   secure = false;
   allowUsers = true;
   allowServices = true;
   allowServers = false;
};


// Our server port.. this one follows the standard
listen {
   port = irc-serv;
   secure = true;
   allowUsers = false;
   allowServices = false;
   allowServers = true;
};


/* Our AustNet server port - kinda dumb since it conflicts but it is at least
 * not one of the well-known-services (first 1024 ports) and thus does not
 * require the server to be started as root.
 */
listen {
   port = 8888;
   secure = true;
   allowUsers = false;
   allowServices = false;
   allowServers = true;
};


/* The DENY class defines access restrictions to certain objects. 
 * These also include the original 'k-lines' which are now 'denied hosts'. 
 * Hey, it's the 21st century, we can be a little more descriptive :)
 *
 * The format is simple, each type of prohibited object has its own sub-class
 * of variable assignments in which the variable name is the name or mask of
 * the object being banned, and the text being assigned to the variable is
 * the reason why this object is unavaiable.
 *
 * Note: Prohibited objects are checked AFTER checking for redirections on
 * objects, so if you redirected +ASD for example to #ASD, the prohibited
 * channel '+ASD' would no longer mean anything and just be a waste of space.
 */
deny {
   /* Invalid nicknames, adapted from the original ircd.conf. Operators and
    * helpers (+o/+O/+h) are allowed to bypass this restriction.
    */
   nicknames {
      X			"This is NOT Undernet.  /msg ChanOP help";
      W			"This is NOT Undernet.  /msg ChanOP help";
      Z			"This is NOT Undernet.  /msg ChanOP help";
      Q			"This is NOT GalaxyNet.  /msg ChanOP help";
      *Chan*SERV*	"This is NOT DALnet. /msg ChanOP help";
      *Nick*SERV*	"This is NOT DALnet. /msg NickOP help";
      *Oper*SERV*	"This is NOT DALnet. /msg OperOP help";
      *Memo*SERV*	"This is NOT DALnet. /msg NoteOP help";
      *Chan*OP*		"Reserved for AustNet services";
      *Oper*OP*		"Reserved for AustNet services";
      *Nick*OP*		"Reserved for AustNet services";
      *Note*OP*		"Reserved for AustNet services";
      *Help*OP*		"Reserved for AustNet services";
      ASD		"Reserved for AustNet services";
      *Love*OP*		"Reserved for AustNet services";
      *Game*OP*		"Reserved for AustNet services";
      *Chan*0P*		"Reserved for AustNet services";
      *Oper*0P*		"Reserved for AustNet services";
      *Nick*0P*		"Reserved for AustNet services";
      *Note*0P*		"Reserved for AustNet services";
      *Help*0P*		"Reserved for AustNet services";
      *Sprint*		"Reserved for AustNet services";
      *AUSTnet*		"Reserved for AustNet IRC operators";
      *AUSTaid*		"Reserved for AustNet services";
      *IRCop*		"Reserved for *real* IRC operators";
      *Global*		"Reserved for AustNet IRC operators";
      A5D		"Reserved for AustNet services";
      45D		"Reserved for AustNet services";
      4SD		"Reserved for AustNet services";
  // These could be done more efficiently could they not?
  // (copied from the original ircd.conf)
      ?Ch?nOP		"Reserved for AustNet services";
      ?N?k?OP?		"Reserved for AustNet services";
      N????P		"Reserved for AustNet services";
   };
   
   /* Invalid channel names. These channels cannot be created, but if they do
    * exist they can be joined. Use wisely, and sparingly.
    *
    * People with either of the helper or operator modes (+o, +O, or +h) are
    * allowed to bypass these channel restrictions to be able do their job.
    */
   channels {
      +austnet		"Reserved for AustNet Staff instead";
      &austnet		"Reserved for AustNet Staff instead";
      +Office		"Reserved for AustNet Staff instead";
      &Office		"Reserved for AustNet Staff instead";
      ?ASD?*		"Reserved for AustNet Services Department";
   };
   
   /* These are hosts/identities that are not allowed on *THIS SERVER*. These
    * are actually modern-day K-lines with reasons attached to them.
    * If nothing is specified for the username, a *@ is appended to the
    * start of the identity mask.
    */
   hosts {
      // Stuff here.
   };
};


/* The list of arbitrators are required on austnet for normal operation. These
 * define specific objects that are allowed to bypass normal inter-server
 * security restrictions such as with regard to mode changes et cetra.
 */
arbiters {
   // These servers are required to be here for operation on AustNet.
   servers {
      services.austnet.org;
      services.hub.austnet.org;
      sprint.austnet.org;
   };
};


/* Redirections are forcing certain things to be sent to another location.
 * These can be 'objects' such as channels, or hosts. Channels can be
 * redirected due to official status (eg. +ircopers isn't official and can
 * now be redirected to the official channel to stop any fake channels or
 * confused users).
 *
 * Hosts are redirected similar to 's-lines', however this redirection does
 * work a little differently. Redirection can be 'forced' which means the user
 * is given the redirection numeric and then disconnected, rather than an
 * unforced situation where the redirection is sent but the client is still
 * allowed to continue to connect into the network.
 *
 * The redirection numeric is dependant on the client being used, which at
 * the time of writing none of the common clients appear to support the
 * numeric, or at least support the numeric properly, so for the time being
 * it might be worth while not forcing redirections until such time as the
 * redirection numeric is widely known, unless of course you have a very good
 * reason (eg. you're a US server that doesn't want 90% of your traffic from
 * australia!)
 */
redirection {
   // List of channels to be redirected, simply a list of channels from and to
   channels {
      +ASD		"#ASD";
      &ASD		"#ASD";
      !ASD		"#ASD";
      +helpertraining	"#HelperTraining";
      &helpertraining	"#HelperTraining";
      !helpertraining	"#HelperTraining";
      +globals		"#Globals";
      &globals		"#Globals";
      !globals		"#Globals";
      +austnetschool	"#AustNetSchool";
      &austnetschool	"#AustNetSchool";
      !austnetschool	"#AustNetSchool";
      +austnetschool	"#AustNetSchool";
      &austnet-party	"#AustNet-Party";
      !austnet-party	"#AustNet-Party";
      +austnet-party	"#AustNet-Party";
      !helpers		"#Helpers";
      &helpers		"#Helpers";
      +helpers		"#Helpers";
      ?helpers?*	"#Helpers";

      /* User friendly names can also be used, such as this one which bypasses
       * normal channel type characteristics. This allows /join ASD to work.
       */
      ASD		"#ASD";
   };
   
   /* List of hosts to be redirected, this format is very different, please
    * read the man page for more details
    */
//   hosts {
      // Netspace has their own server!
//      *.netspace.com.au {
//         server = netspace.vic.au.austnet.org;
//	 port = 6667;
//	 forced = no;
//	 reason = "Netspace customers should use their own server!";
//      };
      
      // So does iinet, but I they have iinet.net.au and iinet.com.au *shrugs*
//      *.iinet.*.au {
//         server = iinet.wa.au.austnet.org;
//	 reason = "iiNet customers should use their own server!";
//      };

      // Default host to redirect to
//      * {
//         server = irc.austnet.org;
//	 port = 6667;
//	 forced = no;
//      };
   
//   };
};


/* The network class defines connections to other servers, both incoming and
 * outgoing. This is a replacement of the old 'C/N-lines' from the dark-ages
 * ircd.conf :)
 *
 * This is in this file since /addcn should be used as a temporary measure,
 * and permanent additions to the lists should be added here.
 */
 // this is incomplete too, ignore it :)
network {
   /* Name of the network you are connecting this server to. If you are not
    * connecting it to a network, you can leave this blank and it will never
    * appear anywhere :) This should be in sync with every other server on
    * the network or else some clients may get 'confused'. :(
    */
   name = AUSTnet-Dev;
   
   alien-router.routers.intranet {
      /* Should we autoconnect to this server upon startup? With this
       * specified the server will continuously attempt to connect to server
       * when the server is not connected locally.
       */
      autoconnect = true;
      
      // Password for this connection (plain-text)
      password = "secretword";
      
      // 
   };
};
